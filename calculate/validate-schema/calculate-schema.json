{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://raw.githubusercontent.com/PGScatalog/pgsc_calc/master/k8s/params_schema.json",
  "title": "PGS Catalog Calculator Parameters",
  "description": "Parameters required to launch an instance of the PGS Catalog Calculator from IGS4EU backend on Embassy cloud",
  "default": "{ \"params\": { \"json\": [ { \"meta\": { \"id\": \"blah\", \"is_vcf\": true, \"chrom\": \"\" }, \"vcf_path\": \"/workspace/data/example.vcf.gz\" } ], \"scorefile\": \"/workspace/data/PGS001229_22.txt\" }, \"nxf_work\": \"/workspace/work/unique_work_id\", \"id\": \"uniqueID\" }",
  "type": "object",
  "properties": {
    "params": {
      "description": "An object that contains all nextflow parameters that are read by -params-file",
      "type": "object",
      "properties": {
        "json": {
          "description": "An array of file objects containing bgzipped human genetic variant data (variant call format) and file metadata.",
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "meta": {
                "description": "Metadata object for each file specified in vcf_path",
                "type": "object",
                "properties": {
                  "id": {
                    "description": "A sample identifier for the target genetic file, which must be shared across split VCF files if applicable",
                    "type": "string"
                  },
                  "is_vcf": {
                    "enum": [
                      true
                    ],
                    "type": "boolean"
                  },
                  "chrom": {
                    "description": "If target data are split by chromosome, this should specify chromosome number (1-22). If target data are not split, set chrom to an empty string.",
                    "type": "string"
                  }
                },
                "required": [
                  "id",
                  "is_vcf",
                  "chrom"
                ]
              },
              "vcf_path": {
                "description": "Path to the VCF file",
                "type": "string"
              }
            },
            "required": [
              "meta",
              "vcf_path"
            ]
          },
          "minItems": 1,
          "uniqueItems": true
        },
        "scorefile": {
          "description": "Path to a PGS Catalog scoring file",
          "type": "string"
        },
        "min_overlap": {
          "description": "Minimum proportion of variants in target genomic data matched in the provided scorefile",
          "type": "number",
          "exclusiveMinimum": 0,
          "maximum": 1
        },
        "max_memory": {
          "description": "The maximum memory used by a workflow process (worker pod limit). String uses nextflow format e.g. '4.GB'",
          "type": "string"
        },
        "max_cpus": {
          "description": "The maximum number of CPUs used by workflow process (worker pod limit).",
          "type": "integer",
          "minimum": 1
        }
      },
      "required": [
        "json",
        "scorefile"
      ]
    },
    "nxf_work": {
      "description": "A path to the nextflow working directory in the ReadWriteMany Persistent Volume Claim shared by the driver and worker pods. Must be a unique path in the PVC not shared by other workflow instances, or weird things will happen.",
      "type": "string"
    },
    "id": {
      "description": "An identifier assigned to the launched workflow instance. It should be universally unique to monitor the status of the launched workflow.",
      "type": "string"
    }
  },
  "required": [
    "params",
    "nxf_work",
    "id"
  ]
}
